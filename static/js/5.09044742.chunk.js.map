{"version":3,"sources":["pages/Graphs.js"],"names":["Graphs","graphRef","useRef","countriesStore","useSelector","state","selectedCountryIndex","selectedCountry","countries","worldData","historyObj","history","timeline","cases","arr","Object","keys","map","key","date","value","maxHeight","length","calcLine","useCallback","item","idx","diff","colWidth","current","clientWidth","clientHeight","calcSlant","Math","sqrt","angle","atan","PI","slant","createList","width","height","line","style","top","transform","className","UtilsService","numberWithCommas","useState","list","setList","useEffect","ref"],"mappings":"uKA+FeA,UA3Ff,WAEE,IAiCMC,EAAWC,mBACXC,EAAiBC,aAAY,SAAAC,GAAK,OAAIA,EAAMF,kBAE5CG,EAAuBH,GAAkBA,EAAeG,qBACxDC,EAAkBD,GAAiD,IAAzBA,EAC5CH,EAAeK,UAAUF,GACzBH,EAAiBA,EAAeM,UAAY,GAE1CC,EAAaH,EAAgBI,QAAUJ,EAAgBI,QAAQC,SAASC,MAzClE,CACV,UAAW,IACX,UAAW,IACX,UAAW,IACX,UAAW,IACX,UAAW,IACX,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,UAAW,IACX,UAAW,IACX,UAAW,IACX,UAAW,IACX,UAAW,IACX,UAAW,IACX,UAAW,IACX,UAAW,IACX,UAAW,IACX,UAAW,IACX,UAAW,KACX,UAAW,KACX,UAAW,KACX,UAAW,KACX,UAAW,KACX,UAAW,MAYPC,EAAMC,OAAOC,KAAKN,GAAYO,KAAI,SAAAC,GAAG,MAAK,CAAEC,KAAMD,EAAKE,MAAOV,EAAWQ,OAEzEG,EAAwC,KAA5BP,EAAIA,EAAIQ,OAAS,GAAGF,MAEhCG,EAAWC,uBAAY,SAACC,EAAMC,GAClC,IAAMC,GAAQb,EAAIY,EAAM,GAAGN,MAAQK,EAAKL,OAASC,EAAY,IACvDO,EAAW,EAAId,EAAIQ,OAAS,IAAMrB,EAAS4B,QAAQC,YAAc7B,EAAS4B,QAAQE,aAClFC,EAAYC,KAAKC,KAAKP,EAAOA,EAAOC,EAAWA,GAErD,MAAO,CAAEO,MADqC,IAA7BF,KAAKG,KAAKT,EAAOC,GAAkBK,KAAKI,GAC/BC,MAAON,KAChC,CAAClB,EAAKO,IAEHkB,EAAaf,uBAAY,kBAAMV,EAAIG,KAAI,SAACQ,EAAMC,GAClD,IAAMc,EAAQ,EAAI1B,EAAIQ,OAAS,IAAM,IAC/BmB,EAAShB,EAAKL,MAAQC,EAAY,IAAM,IACxCqB,EAAO5B,EAAIY,EAAM,GAAKH,EAASE,EAAMC,GAAO,EAC5CiB,EAAQ,CACZC,IAAI,IAAD,OAAmB,EAAbF,EAAKJ,MAAX,MAA0BE,MAAM,GAAD,OAAKE,EAAKJ,MAAQI,EAAKJ,MAAQ,IAA/B,KAClCO,UAAU,WAAD,OAAaH,EAAKP,MAAlB,SAEX,OAAO,wBAAIW,UAAU,SAAS5B,IAAKO,EAAKN,KAAMwB,MAAO,CAAEH,UACrD,yBAAKM,UAAU,iBAAiBH,MAAO,CAAEF,WACvC,yBAAKK,UAAU,cACb,0BAAMA,UAAU,SAASC,IAAaC,iBAAiBvB,EAAKL,SAE7DN,EAAIY,EAAM,IAAM,0BAAMoB,UAAU,OAAOH,MAAOA,WAGjD,CAAC7B,EAAKS,EAAUF,IAxEJ,EA0EQ4B,mBAAS,MA1EjB,mBA0ETC,EA1ES,KA0EHC,EA1EG,KAgFhB,OAJAC,qBAAU,WACHF,GAAMC,EAAQZ,OAClB,CAACW,EAAMX,IAGR,yBAAKO,UAAU,UACb,yBAAKA,UAAU,sBACb,yBAAKA,UAAU,gBAAgBO,IAAKpD,GAClC,wBAAI6C,UAAU,WAAWI","file":"static/js/5.09044742.chunk.js","sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport UtilsService from '../services/UtilsService';\r\nfunction Graphs() {\r\n\r\n  const obj = {\r\n    \"3/27/20\": 110,\r\n    \"3/28/20\": 110,\r\n    \"3/29/20\": 120,\r\n    \"3/30/20\": 170,\r\n    \"3/31/20\": 174,\r\n    \"4/1/20\": 237,\r\n    \"4/2/20\": 273,\r\n    \"4/3/20\": 281,\r\n    \"4/4/20\": 299,\r\n    \"4/5/20\": 349,\r\n    \"4/6/20\": 367,\r\n    \"4/7/20\": 423,\r\n    \"4/8/20\": 444,\r\n    \"4/9/20\": 484,\r\n    \"4/10/20\": 521,\r\n    \"4/11/20\": 555,\r\n    \"4/12/20\": 607,\r\n    \"4/13/20\": 665,\r\n    \"4/14/20\": 714,\r\n    \"4/15/20\": 784,\r\n    \"4/16/20\": 840,\r\n    \"4/17/20\": 906,\r\n    \"4/18/20\": 933,\r\n    \"4/19/20\": 996,\r\n    \"4/20/20\": 1026,\r\n    \"4/21/20\": 1092,\r\n    \"4/22/20\": 1176,\r\n    \"4/23/20\": 1279,\r\n    \"4/24/20\": 1351,\r\n    \"4/25/20\": 1463\r\n  }\r\n\r\n  const graphRef = useRef();\r\n  const countriesStore = useSelector(state => state.countriesStore);\r\n\r\n  const selectedCountryIndex = countriesStore && countriesStore.selectedCountryIndex;\r\n  const selectedCountry = selectedCountryIndex || selectedCountryIndex === 0\r\n    ? countriesStore.countries[selectedCountryIndex]\r\n    : countriesStore ? countriesStore.worldData : {};\r\n\r\n  const historyObj = selectedCountry.history ? selectedCountry.history.timeline.cases : obj;\r\n  const arr = Object.keys(historyObj).map(key => ({ date: key, value: historyObj[key] }));\r\n\r\n  const maxHeight = arr[arr.length - 1].value * 1.05;\r\n\r\n  const calcLine = useCallback((item, idx) => {\r\n    const diff = (arr[idx + 1].value - item.value) / maxHeight * 100;\r\n    const colWidth = 1 / arr.length * 100 * graphRef.current.clientWidth / graphRef.current.clientHeight;\r\n    const calcSlant = Math.sqrt(diff * diff + colWidth * colWidth);\r\n    const tanAngle = Math.atan(diff / colWidth) * 180 / Math.PI;\r\n    return { angle: tanAngle, slant: calcSlant };\r\n  }, [arr, maxHeight])\r\n\r\n  const createList = useCallback(() => arr.map((item, idx) => {\r\n    const width = 1 / arr.length * 100 + '%';\r\n    const height = item.value / maxHeight * 100 + '%';\r\n    const line = arr[idx + 1] ? calcLine(item, idx) : 0;\r\n    const style = {\r\n      top: `-${line.slant * 4}px`, width: `${line.slant * line.slant + 100}%`,\r\n      transform: `rotate(-${line.angle}deg)`\r\n    }\r\n    return <li className=\"column\" key={item.date} style={{ width }}>\r\n      <div className=\"column-percent\" style={{ height }}>\r\n        <div className=\"wrap-value\">\r\n          <span className=\"value\">{UtilsService.numberWithCommas(item.value)}</span>\r\n        </div>\r\n        {arr[idx + 1] && <span className=\"line\" style={style}></span>}\r\n      </div>\r\n    </li>\r\n  }), [arr, calcLine, maxHeight])\r\n\r\n  const [list, setList] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!list) setList(createList());\r\n  }, [list, createList])\r\n\r\n  return (\r\n    <div className=\"graphs\">\r\n      <div className=\"wrap-graph-columns\">\r\n        <div className=\"graph-columns\" ref={graphRef}>\r\n          <ul className=\"columns\">{list}</ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Graphs;\r\n"],"sourceRoot":""}